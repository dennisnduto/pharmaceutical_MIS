DEBUG 2025-10-25 21:28:31,887 schema 15720 20268 CREATE TABLE "django_migrations" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "app" varchar(255) NOT NULL, "name" varchar(255) NOT NULL, "applied" timestamp with time zone NOT NULL); (params None)
DEBUG 2025-10-25 21:28:32,705 schema 15720 20268 CREATE TABLE "django_content_type" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "name" varchar(100) NOT NULL, "app_label" varchar(100) NOT NULL, "model" varchar(100) NOT NULL); (params None)
DEBUG 2025-10-25 21:28:33,251 schema 15720 20268 ALTER TABLE "django_content_type" ADD CONSTRAINT "django_content_type_app_label_model_76bd3d3b_uniq" UNIQUE ("app_label", "model"); (params None)
DEBUG 2025-10-25 21:28:34,363 schema 15720 20268 ALTER TABLE "django_content_type" ALTER COLUMN "name" DROP NOT NULL; (params None)
DEBUG 2025-10-25 21:28:34,921 schema 15720 20268 ALTER TABLE "django_content_type" DROP COLUMN "name" CASCADE; (params None)
DEBUG 2025-10-25 21:28:35,743 schema 15720 20268 CREATE TABLE "auth_permission" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "name" varchar(50) NOT NULL, "content_type_id" integer NOT NULL, "codename" varchar(100) NOT NULL); (params None)
DEBUG 2025-10-25 21:28:36,287 schema 15720 20268 CREATE TABLE "auth_group" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "name" varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2025-10-25 21:28:36,571 schema 15720 20268 CREATE TABLE "auth_group_permissions" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "group_id" integer NOT NULL, "permission_id" integer NOT NULL); (params None)
DEBUG 2025-10-25 21:28:36,852 schema 15720 20268 ALTER TABLE "auth_permission" ADD CONSTRAINT "auth_permission_content_type_id_codename_01ab375a_uniq" UNIQUE ("content_type_id", "codename"); (params None)
DEBUG 2025-10-25 21:28:37,120 schema 15720 20268 ALTER TABLE "auth_permission" ADD CONSTRAINT "auth_permission_content_type_id_2f476e4b_fk_django_co" FOREIGN KEY ("content_type_id") REFERENCES "django_content_type" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:28:37,392 schema 15720 20268 CREATE INDEX "auth_permission_content_type_id_2f476e4b" ON "auth_permission" ("content_type_id"); (params None)
DEBUG 2025-10-25 21:28:37,664 schema 15720 20268 CREATE INDEX "auth_group_name_a6ea08ec_like" ON "auth_group" ("name" varchar_pattern_ops); (params None)
DEBUG 2025-10-25 21:28:37,933 schema 15720 20268 ALTER TABLE "auth_group_permissions" ADD CONSTRAINT "auth_group_permissions_group_id_permission_id_0cd325b0_uniq" UNIQUE ("group_id", "permission_id"); (params None)
DEBUG 2025-10-25 21:28:38,210 schema 15720 20268 ALTER TABLE "auth_group_permissions" ADD CONSTRAINT "auth_group_permissions_group_id_b120cbf9_fk_auth_group_id" FOREIGN KEY ("group_id") REFERENCES "auth_group" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:28:38,478 schema 15720 20268 ALTER TABLE "auth_group_permissions" ADD CONSTRAINT "auth_group_permissio_permission_id_84c5c92e_fk_auth_perm" FOREIGN KEY ("permission_id") REFERENCES "auth_permission" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:28:38,748 schema 15720 20268 CREATE INDEX "auth_group_permissions_group_id_b120cbf9" ON "auth_group_permissions" ("group_id"); (params None)
DEBUG 2025-10-25 21:28:39,019 schema 15720 20268 CREATE INDEX "auth_group_permissions_permission_id_84c5c92e" ON "auth_group_permissions" ("permission_id"); (params None)
DEBUG 2025-10-25 21:28:39,851 schema 15720 20268 ALTER TABLE "auth_permission" ALTER COLUMN "name" TYPE varchar(255); (params None)
DEBUG 2025-10-25 21:28:46,698 schema 15720 20268 ALTER TABLE "auth_group" ALTER COLUMN "name" TYPE varchar(150); (params None)
DEBUG 2025-10-25 21:28:49,507 schema 15720 20268 CREATE TABLE "core_user" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "password" varchar(128) NOT NULL, "last_login" timestamp with time zone NULL, "is_superuser" boolean NOT NULL, "username" varchar(150) NOT NULL UNIQUE, "first_name" varchar(150) NOT NULL, "last_name" varchar(150) NOT NULL, "email" varchar(254) NOT NULL, "is_staff" boolean NOT NULL, "is_active" boolean NOT NULL, "date_joined" timestamp with time zone NOT NULL, "role" varchar(20) NOT NULL); (params None)
DEBUG 2025-10-25 21:28:50,052 schema 15720 20268 CREATE TABLE "core_user_groups" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "user_id" bigint NOT NULL, "group_id" integer NOT NULL); (params None)
DEBUG 2025-10-25 21:28:50,322 schema 15720 20268 CREATE TABLE "core_user_user_permissions" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "user_id" bigint NOT NULL, "permission_id" integer NOT NULL); (params None)
DEBUG 2025-10-25 21:28:50,590 schema 15720 20268 CREATE INDEX "core_user_username_36e4f7f7_like" ON "core_user" ("username" varchar_pattern_ops); (params None)
DEBUG 2025-10-25 21:28:50,860 schema 15720 20268 ALTER TABLE "core_user_groups" ADD CONSTRAINT "core_user_groups_user_id_group_id_c82fcad1_uniq" UNIQUE ("user_id", "group_id"); (params None)
DEBUG 2025-10-25 21:28:51,132 schema 15720 20268 ALTER TABLE "core_user_groups" ADD CONSTRAINT "core_user_groups_user_id_70b4d9b8_fk_core_user_id" FOREIGN KEY ("user_id") REFERENCES "core_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:28:51,401 schema 15720 20268 ALTER TABLE "core_user_groups" ADD CONSTRAINT "core_user_groups_group_id_fe8c697f_fk_auth_group_id" FOREIGN KEY ("group_id") REFERENCES "auth_group" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:28:51,673 schema 15720 20268 CREATE INDEX "core_user_groups_user_id_70b4d9b8" ON "core_user_groups" ("user_id"); (params None)
DEBUG 2025-10-25 21:28:51,947 schema 15720 20268 CREATE INDEX "core_user_groups_group_id_fe8c697f" ON "core_user_groups" ("group_id"); (params None)
DEBUG 2025-10-25 21:28:52,218 schema 15720 20268 ALTER TABLE "core_user_user_permissions" ADD CONSTRAINT "core_user_user_permissions_user_id_permission_id_73ea0daa_uniq" UNIQUE ("user_id", "permission_id"); (params None)
DEBUG 2025-10-25 21:28:52,488 schema 15720 20268 ALTER TABLE "core_user_user_permissions" ADD CONSTRAINT "core_user_user_permissions_user_id_085123d3_fk_core_user_id" FOREIGN KEY ("user_id") REFERENCES "core_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:28:52,759 schema 15720 20268 ALTER TABLE "core_user_user_permissions" ADD CONSTRAINT "core_user_user_permi_permission_id_35ccf601_fk_auth_perm" FOREIGN KEY ("permission_id") REFERENCES "auth_permission" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:28:53,029 schema 15720 20268 CREATE INDEX "core_user_user_permissions_user_id_085123d3" ON "core_user_user_permissions" ("user_id"); (params None)
DEBUG 2025-10-25 21:28:53,298 schema 15720 20268 CREATE INDEX "core_user_user_permissions_permission_id_35ccf601" ON "core_user_user_permissions" ("permission_id"); (params None)
DEBUG 2025-10-25 21:28:54,187 schema 15720 20268 CREATE TABLE "django_admin_log" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "action_time" timestamp with time zone NOT NULL, "object_id" text NULL, "object_repr" varchar(200) NOT NULL, "action_flag" smallint NOT NULL CHECK ("action_flag" >= 0), "change_message" text NOT NULL, "content_type_id" integer NULL, "user_id" bigint NOT NULL); (params None)
DEBUG 2025-10-25 21:28:54,736 schema 15720 20268 ALTER TABLE "django_admin_log" ADD CONSTRAINT "django_admin_log_content_type_id_c4bce8eb_fk_django_co" FOREIGN KEY ("content_type_id") REFERENCES "django_content_type" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:28:55,008 schema 15720 20268 ALTER TABLE "django_admin_log" ADD CONSTRAINT "django_admin_log_user_id_c564eba6_fk_core_user_id" FOREIGN KEY ("user_id") REFERENCES "core_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:28:55,279 schema 15720 20268 CREATE INDEX "django_admin_log_content_type_id_c4bce8eb" ON "django_admin_log" ("content_type_id"); (params None)
DEBUG 2025-10-25 21:28:55,551 schema 15720 20268 CREATE INDEX "django_admin_log_user_id_c564eba6" ON "django_admin_log" ("user_id"); (params None)
DEBUG 2025-10-25 21:28:58,105 schema 15720 20268 CREATE TABLE "authtoken_token" ("key" varchar(40) NOT NULL PRIMARY KEY, "created" timestamp with time zone NOT NULL, "user_id" bigint NOT NULL UNIQUE); (params None)
DEBUG 2025-10-25 21:28:58,652 schema 15720 20268 ALTER TABLE "authtoken_token" ADD CONSTRAINT "authtoken_token_user_id_35299eff_fk_core_user_id" FOREIGN KEY ("user_id") REFERENCES "core_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:28:58,923 schema 15720 20268 CREATE INDEX "authtoken_token_key_10f0b77e_like" ON "authtoken_token" ("key" varchar_pattern_ops); (params None)
DEBUG 2025-10-25 21:29:02,263 schema 15720 20268 ALTER TABLE "core_user" ADD COLUMN "initial_password" varchar(128) NULL; (params None)
DEBUG 2025-10-25 21:29:03,417 schema 15720 20268 CREATE TABLE "suppliers_supplier" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "name" varchar(255) NOT NULL, "contact_person" varchar(255) NOT NULL, "phone" varchar(50) NOT NULL, "email" varchar(254) NOT NULL, "reliability_rating" numeric(3, 2) NOT NULL); (params None)
DEBUG 2025-10-25 21:29:04,626 schema 15720 20268 CREATE TABLE "medicines_medicine" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "name" varchar(255) NOT NULL, "category" varchar(255) NOT NULL, "generic_name" varchar(255) NOT NULL, "unit_price" numeric(10, 2) NOT NULL, "reorder_level" integer NOT NULL CHECK ("reorder_level" >= 0), "supplier_id" bigint NULL); (params None)
DEBUG 2025-10-25 21:29:05,165 schema 15720 20268 ALTER TABLE "medicines_medicine" ADD CONSTRAINT "medicines_medicine_supplier_id_bc7dc75b_fk_suppliers" FOREIGN KEY ("supplier_id") REFERENCES "suppliers_supplier" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:29:05,449 schema 15720 20268 CREATE INDEX "medicines_medicine_supplier_id_bc7dc75b" ON "medicines_medicine" ("supplier_id"); (params None)
DEBUG 2025-10-25 21:29:06,307 schema 15720 20268 ALTER TABLE "medicines_medicine" ADD COLUMN "barcode" varchar(255) DEFAULT '' NOT NULL; (params None)
DEBUG 2025-10-25 21:29:06,849 schema 15720 20268 ALTER TABLE "medicines_medicine" ALTER COLUMN "barcode" DROP DEFAULT; (params None)
DEBUG 2025-10-25 21:29:07,122 schema 15720 20268 ALTER TABLE "medicines_medicine" ADD COLUMN "description" text DEFAULT '' NOT NULL; (params None)
DEBUG 2025-10-25 21:29:07,397 schema 15720 20268 ALTER TABLE "medicines_medicine" ALTER COLUMN "description" DROP DEFAULT; (params None)
DEBUG 2025-10-25 21:29:07,676 schema 15720 20268 ALTER TABLE "medicines_medicine" ADD COLUMN "dosage_form" varchar(20) DEFAULT 'tablet' NOT NULL; (params None)
DEBUG 2025-10-25 21:29:07,945 schema 15720 20268 ALTER TABLE "medicines_medicine" ALTER COLUMN "dosage_form" DROP DEFAULT; (params None)
DEBUG 2025-10-25 21:29:08,220 schema 15720 20268 ALTER TABLE "medicines_medicine" ADD COLUMN "manufacturer" varchar(255) DEFAULT '' NOT NULL; (params None)
DEBUG 2025-10-25 21:29:08,489 schema 15720 20268 ALTER TABLE "medicines_medicine" ALTER COLUMN "manufacturer" DROP DEFAULT; (params None)
DEBUG 2025-10-25 21:29:09,300 schema 15720 20268 ALTER TABLE "medicines_medicine" DROP COLUMN "category" CASCADE; (params None)
DEBUG 2025-10-25 21:29:10,388 schema 15720 20268 SET CONSTRAINTS "medicines_medicine_supplier_id_bc7dc75b_fk_suppliers" IMMEDIATE; ALTER TABLE "medicines_medicine" DROP CONSTRAINT "medicines_medicine_supplier_id_bc7dc75b_fk_suppliers"; (params None)
DEBUG 2025-10-25 21:29:11,009 schema 15720 20268 ALTER TABLE "medicines_medicine" DROP COLUMN "supplier_id" CASCADE; (params None)
DEBUG 2025-10-25 21:29:11,974 schema 15720 20268 CREATE TABLE "stock_stock" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "batch_number" varchar(100) NOT NULL, "expiry_date" date NOT NULL, "quantity" integer NOT NULL CHECK ("quantity" >= 0), "purchase_price" numeric(10, 2) NOT NULL, "medicine_id" bigint NOT NULL); (params None)
DEBUG 2025-10-25 21:29:12,519 schema 15720 20268 ALTER TABLE "stock_stock" ADD CONSTRAINT "stock_stock_medicine_id_f7d9c71e_fk_medicines_medicine_id" FOREIGN KEY ("medicine_id") REFERENCES "medicines_medicine" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:29:12,790 schema 15720 20268 CREATE INDEX "stock_stock_medicine_id_f7d9c71e" ON "stock_stock" ("medicine_id"); (params None)
DEBUG 2025-10-25 21:29:13,612 schema 15720 20268 CREATE TABLE "sales_sale" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "quantity_sold" integer NOT NULL CHECK ("quantity_sold" >= 0), "sale_date" date NOT NULL, "sale_price" numeric(10, 2) NOT NULL, "medicine_id" bigint NOT NULL, "stock_id" bigint NOT NULL); (params None)
DEBUG 2025-10-25 21:29:14,152 schema 15720 20268 ALTER TABLE "sales_sale" ADD CONSTRAINT "sales_sale_medicine_id_498f3e65_fk_medicines_medicine_id" FOREIGN KEY ("medicine_id") REFERENCES "medicines_medicine" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:29:14,424 schema 15720 20268 ALTER TABLE "sales_sale" ADD CONSTRAINT "sales_sale_stock_id_45310633_fk_stock_stock_id" FOREIGN KEY ("stock_id") REFERENCES "stock_stock" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:29:14,693 schema 15720 20268 CREATE INDEX "sales_sale_medicine_id_498f3e65" ON "sales_sale" ("medicine_id"); (params None)
DEBUG 2025-10-25 21:29:14,963 schema 15720 20268 CREATE INDEX "sales_sale_stock_id_45310633" ON "sales_sale" ("stock_id"); (params None)
DEBUG 2025-10-25 21:29:16,602 schema 15720 20268 SET CONSTRAINTS "sales_sale_stock_id_45310633_fk_stock_stock_id" IMMEDIATE; ALTER TABLE "sales_sale" DROP CONSTRAINT "sales_sale_stock_id_45310633_fk_stock_stock_id"; (params None)
DEBUG 2025-10-25 21:29:16,872 schema 15720 20268 ALTER TABLE "sales_sale" ALTER COLUMN "stock_id" DROP NOT NULL; (params None)
DEBUG 2025-10-25 21:29:17,142 schema 15720 20268 ALTER TABLE "sales_sale" ADD CONSTRAINT "sales_sale_stock_id_45310633_fk_stock_stock_id" FOREIGN KEY ("stock_id") REFERENCES "stock_stock" ("id") DEFERRABLE INITIALLY DEFERRED; (params None)
DEBUG 2025-10-25 21:29:17,981 schema 15720 20268 CREATE TABLE "django_session" ("session_key" varchar(40) NOT NULL PRIMARY KEY, "session_data" text NOT NULL, "expire_date" timestamp with time zone NOT NULL); (params None)
DEBUG 2025-10-25 21:29:18,525 schema 15720 20268 CREATE INDEX "django_session_session_key_c0390e0f_like" ON "django_session" ("session_key" varchar_pattern_ops); (params None)
DEBUG 2025-10-25 21:29:18,808 schema 15720 20268 CREATE INDEX "django_session_expire_date_a5c62663" ON "django_session" ("expire_date"); (params None)
